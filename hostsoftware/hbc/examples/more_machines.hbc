endpoint power {
  eid 1;
  datatype BOOL;
  access { write }
}

endpoint button {
  eid 4;
  datatype UINT8;
  access { broadcast }
}

device my_plug {
  ip fe80::50:c4ff:fe04:83a7;
  eids { 1, 4 }
}


machine toggle {
  states { init, off }
  in(init) {
    if(ep my_plug.button == 1) {
      write my_plug.power := 0;
      goto off;
    }
  }
  in(off) {
    if(ep my_plug.button == 1) {
      write my_plug.power := 1;
      goto init;
    }
  }
}
